@using Jmelosegui.Mvc.GoogleMap

@model IEnumerable<gloventApp.GUI.Models.OrganizationViewModel>

@{
    ViewBag.Title = "OrganizationDashbord";
    Layout = "~/Views/Shared/_Layout.cshtml";
} 






 <!-- Map box -->

<!-- search form -->
<form action="#" method="get" class="sidebar-form">
    <div class="input-group">
        <input type="text" name="q" class="form-control" placeholder="Search...">
        <span class="input-group-btn">
            <button type="submit" name="search" id="search-btn" class="btn btn-flat">
                <i class="fa fa-search"></i>
            </button>
        </span>
    </div>
</form>
<!-- /.search form -->

<ul class="timeline">

    <!-- timeline time label -->
    <li class="time-label">
        <span class="bg-red">
            @ViewBag.nomx
                    

            </span>
            </li>
            <!-- /.timeline-label -->
            <!-- timeline item -->
            <li>
                <!-- timeline icon -->
                <i class="fa  fa-share-alt bg-blue"></i>
                <div class="timeline-item">
                    <span class="time">
                        <i class="fa fa-clock-o"></i> @{
                            var now = DateTime.Now;
                        }
                        <time datetime="@now.ToString("o")" pubdate>@now.ToLongDateString()</time>
                    </span>

                    <h3 class="timeline-header"><a href="#">Organizations</a> </h3>

                    <div class="timeline-body">
                        <div class="box box-primary">
                            <button type="button" class="btn btn-default pull-right"><i class="fa fa-plus"></i> @Html.ActionLink("Create New", "Create")</button>

                            <!-- /.box-header -->
                            <div class="box-body"> </div>
                            <!-- /.box-body -->
                            <div class="box-footer clearfix no-border">


                                @foreach (var item in Model)
                                {
                                    <div class="col-lg-4 col-xs-6">
                                        <!-- small box -->
                                        <div class="small-box bg-aqua">
                                            <div class="inner">
                                                <h2>@Html.DisplayFor(modelItem => item.name)</h2>

                                                <p>@Html.DisplayFor(modelItem => item.type)</p>
                                            </div>
                                            <div class="icon">
                                                @{ string path = "~/Content/upload/" + @Html.DisplayFor(modelItem => item.President.image);}
                                                <i class="">
                                                    <img style="background-repeat: no-repeat;background-position: 50%;
                                                            border-radius: 50%;
                                                width: 100px;
                                                height: 100px;" src="@Url.Content(path)" />
                                                </i>
                                            </div>
                                            <a href="#" class="small-box-footer">
                                                @Html.ActionLink("More Info", "Details", new { id = item.id }) |

                                            </a>
                                        </div>
                                    </div>
                                                    }

                            </div>

                            <div class="box-tools pull-right">
                                <ul class="pagination pagination-sm inline">
                                    <li><a href="#">&laquo;</a></li>
                                    <li><a href="#">1</a></li>
                                    <li><a href="#">2</a></li>
                                    <li><a href="#">3</a></li>
                                    <li><a href="#">&raquo;</a></li>
                                </ul>
                            </div>
                        </div>

                    </div>


                    <!--Second part-->
            <li>
                <i class="fa fa-comments bg-yellow"></i>

                <div class="timeline-item">
                    <span class="time"><i class="fa fa-clock-o"></i> 27 mins ago</span>

                    <h3 class="timeline-header"><a href="#">Organizations </a>making event this month </h3>

                    <div class="timeline-body">
                        <div class="box">
                            <div class="box-header with-border">
                                <h3 class="box-title"></h3>

                                <div class="box-tools pull-right">
                                    <button type="button" class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="Collapse">
                                        <i class="fa fa-minus"></i>
                                    </button>
                                    <button type="button" class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip" title="Remove">
                                        <i class="fa fa-times"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="box-body">
                                @*@Html.Partial("_organizationByEventThisMonth")*@
                                @foreach (var item in ViewBag.p)
                                {
                                    <div class="col-lg-4 col-xs-6">
                                        <!-- small box -->
                                        <div class="small-box bg-aqua">
                                            <div class="inner">
                                                <h2>@item.name</h2>

                                                <p>@item.type</p>
                                            </div>
                                            <div class="icon">
                                                @{ string path = "~/Content/upload/" + @item.President.image;}
                                                <i class="">
                                                    <img style="background-repeat: no-repeat;background-position: 50%;
                                                            border-radius: 50%;
                                                width: 100px;
                                                height: 100px;" src="@Url.Content(path)" />
                                                </i>
                                            </div>
                                            <a href="#" class="small-box-footer">
                                                @Html.ActionLink("More Info", "Details", new { id = item.id }) |

                                            </a>
                                        </div>
                                    </div>
                                                    }

                                



                                 
                            </div>
                            <!-- /.box-body -->
                            <div class="box-footer">
                                Footer
                            </div>
                            <!-- /.box-footer-->
                        </div>
                    </div>
                    <div class="timeline-footer">
                        <a class="btn btn-warning btn-flat btn-xs">View comment</a>
                    </div>
                </div>
            </li>





            <li>
                <i class="fa fa-envelope bg-red"></i>

                <div class="timeline-item">
                    <span class="time"><i class="fa fa-clock-o"></i> 27 mins ago</span>

                    <div class="timeline-body">
                        <div class="box">
                            <div class="box-header with-border">
                                <h3 class="box-title">OrganizationLocations</h3>

                                @using (Html.BeginForm())
                                {
                                    <h3>Organizatons making events in </h3>
                                    @Html.DropDownList("pp", (IEnumerable<SelectListItem>)ViewBag.pp, new { htmlAttributes = new { @class = "form-control" } })
                                    <input type="submit" name="search" value="search" class="btn btn-default" />

                                }

                                <div class="box-tools pull-right">
                                    <button type="button" class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="Collapse">
                                        <i class="fa fa-minus"></i>
                                    </button>
                                    <button type="button" class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip" title="Remove">
                                        <i class="fa fa-times"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="box-body">


                                @(Html.GoogleMap()
                .Name("map")
                .Height(300)
                .FitToMarkersBounds(true)
                        .MarkersGeocoding(true)
                        .Markers(m =>
                        {
                            foreach (var item in ViewBag.map)
                            {

                                m.Add().Window(w => w.Add().MaxWidth(500)
                                                    .Content(
                                                    Model => item.name
                                                    + item.type
                                                    + item.Location
                                                    )
                                                )
                                                .Address(item.Location);
                            }
                        })
                        .ApiKey("AIzaSyCtmb5sclkiJ3F0uRvv11mESYn1iJ2GvyI")
                                )








                            </div>
                            <!-- /.box-body -->
                            <button type="button" class="btn btn-default pull-right"><i class="fa fa-plus"></i></button>
                            <!-- /.box-footer-->
                        </div>
                    </div>

                </div>
            </li>



    <li>
        <i class="fa fa-envelope bg-red"></i>

        <div class="timeline-item">
            <span class="time"><i class="fa fa-clock-o"></i> 27 mins ago</span>

            <div class="timeline-body">
                <div class="box">
                    <div class="box-header with-border">
                        <h3 class="box-title">Title</h3>

                        <div class="box-tools pull-right">
                            <button type="button" class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="Collapse">
                                <i class="fa fa-minus"></i>
                            </button>
                            <button type="button" class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip" title="Remove">
                                <i class="fa fa-times"></i>
                            </button>
                        </div>
                    </div>
                    <div class="box-body">


                    </div>
                    <!-- /.box-body -->
                    <button type="button" class="btn btn-default pull-right"><i class="fa fa-plus"></i> @Html.ActionLink("Create New", "Create")</button>
                    <!-- /.box-footer-->
                </div>
            </div>

        </div>
    </li>





            </div>
            </li>
            <!-- END timeline item -->
    




    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")


    @section scripts
{
        @(Html.GoogleMap().ScriptRegistrar())
    }
